!function(t){function e(s){if(i[s])return i[s].exports;var o=i[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){if(t.abort)throw"undefined"==typeof t.message&&(t.message="Что-то пошло не так…"),"undefined"!=typeof t.container&&(t.container.sgFailed=t.message),t.message}function r(t,e,i,s,o){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e(r,i,s):a({message:"Не могу получить вот это: "+t,container:i,abort:o}))},r.open("GET",t,!0),r.send(null)}function n(){l=document.getElementsByClassName("sga_container");for(var t=l.length-1;t>=0;t--)l[t].sgInitialized||l[t].sgFailed||(r(l[t].getAttribute("sgGoodsXml"),c,l[t],t,!0),l[t].sgFailed||(l[t].sgInitialized=!0))}function c(t,e,i){for(var s={},o=[],a=t.responseXML.documentElement,r=a.attributes.length-1;r>=0;r--)s[a.attributes[r].name]=a.attributes[r].value;for(var n=t.responseXML.getElementsByTagName("good"),c=Math.min(Number(e.getAttribute("sgCount")),n.length),l=e.getAttribute("sgScrollCount")?Number(e.getAttribute("sgScrollCount")):1,r=0;r<n.length;r++)o.push(new p(n[r],r));ReactDOM.render(React.createElement(u,{idxCont:i,data:s,goods:o,count:c,scroll:l}),e)}function p(t,e){this.loaded=!1,this.order=null;for(var i=t.attributes.length-1;i>=0;i--)switch(!0){case/^\s*$/.test(t.attributes[i].value):break;case/^[0-9.,]+$/.test(t.attributes[i].value):this[t.attributes[i].name]=Number(t.attributes[i].value);break;default:this[t.attributes[i].name]=t.attributes[i].value}this.key=this.id?this.id:e,this.url&&(this.url=this.articul?this.url+"/"+this.articul:this.url+"/goods_"+this.id),this.pic&&(this.picM="/pic/micro/"+this.pic,this.picS="/pic/small/"+this.pic,this.picB="/pic/big/"+this.pic)}var l,d=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();n();var u=function(t){function e(t){i(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.state={idx:0,idxLoadedL:null,idxLoadedR:null},o}return o(e,t),d(e,[{key:"move",value:function(t){for(var e=Math.max(0,Math.min(this.state.idx+t,this.props.goods.length-this.props.count)),i=null!==this.state.idxLoadedL?Math.min(this.state.idxLoadedL,e):e,s=null!==this.state.idxLoadedR?Math.max(this.state.idxLoadedR,e+this.props.count):e+this.props.count,o=e;o<this.state.idxLoadedL;o++)this.props.goods[o].order=o,this.props.goods[o].loaded=!0;for(var o=null!==this.state.idxLoadedR?this.state.idxLoadedR:e;o<e+this.props.count;o++)this.props.goods[o].order=o,this.props.goods[o].loaded=!0;this.setState({idx:e,idxLoadedL:i,idxLoadedR:s})}},{key:"componentDidMount",value:function(){this.move(0)}},{key:"render",value:function(){var t=this;return React.createElement("div",{className:"sga_component_goods"},this.props.count<1?"Нет товаров.":React.createElement("div",{className:"sga_goods"},this.props.goods.map(function(e){if(e.loaded)return React.createElement(h,{idxCont:t.props.idxCont,idx:t.state.idx,count:t.props.count,root:t.props.data,key:e.key,order:e.order,data:e})})),React.createElement("a",{href:"javascript:void(0);",className:"sga_prev",onClick:function(){return t.move(-t.props.scroll)}}),React.createElement("a",{href:"javascript:void(0);",className:"sga_next",onClick:function(){return t.move(+t.props.scroll)}}))}}]),e}(React.Component),h=function(t){function e(t){i(this,e);var o=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.state={picM:"",picS:"",picO:""},o}return o(e,t),d(e,[{key:"componentDidMount",value:function(){r(this.props.data.picM,function(t){this.setState({picM:React.createElement("img",{src:this.props.data.picM,alt:this.props.data.name,className:"border1",onMouseOver:function(t){t.persist(),popup_up(t.target,"sg"+this.props.idxCont+"_popupdiv_"+this.props.data.id,t)}.bind(this)})})}.bind(this)),r(this.props.data.picS,function(t){this.setState({picS:React.createElement("img",{src:this.props.data.picS,alt:this.props.data.name,className:"border1"})})}.bind(this)),r("/icons/info.png",function(t){this.setState({picO:React.createElement("img",{src:"/icons/info.png",alt:"Это ваш товар",title:"Это ваш товар",className:"floatright"})})}.bind(this))}},{key:"render",value:function(){var t=this.props.root,e=this.props.data,i=e.url?"a":"span";return React.createElement("div",{className:"object_goods block_01 thumb bounded"+(this.props.order<this.props.idx||this.props.order>=this.props.idx+this.props.count?" hide":" show")},React.createElement("input",{id:"sg"+this.props.idxCont+"_num_"+this.props.data.id,name:"num",type:"hidden",value:"1"}),t.isSeller&&1==t.isSeller&&this.state.picO,e.hotType&&React.createElement("div",{style:{width:0,height:0}},e.hotPic&&/^st_/.test(e.hotPic)?React.createElement("div",{className:e.hotPic},e.hotType):React.createElement("div",{className:"imp margin_bottom"},React.createElement("img",{src:e.hotPic,className:"sga_hotpic",alt:e.hotType}),e.hotType)),t.ShowPicInTblGoods&&0!=t.ShowPicInTblGoods&&(this.state.picM||this.state.picS)&&React.createElement(i,{href:e.url,className:"sga_pic"},this.state.picM?this.state.picM:this.state.picS),t.ShowPicInTblGoods&&0!=t.ShowPicInTblGoods&&this.state.picM&&this.state.picS&&React.createElement(i,{href:e.url,id:"sg"+this.props.idxCont+"_popupdiv_"+e.id,className:"popupdiv block_02"},this.state.picS),e.name&&React.createElement("h3",null,React.createElement(i,{href:e.url},e.name)),e.review&&(!t.isShowDescr||0!=t.isShowDescr)&&React.createElement("p",null,e.review,e.url&&React.createElement("a",{href:e.url,style:{display:"block"}},"Подробнее…")))}}]),e}(React.Component)}]);